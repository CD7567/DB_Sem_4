# ___SQL-скрипты___

## ___`ddl.sql`___

Скрипт, определяющий основную схему базы данных.

---

## ___`dml.sql`___

Скрипт заполнения базы данных.

---

## ___`queries.sql`___

Примеры запросов без тестирования.

### ___`SELECT`___

- Выбор соответствия клиента и его транзакций
- Выбор соответствия транзакции и ее позиций
- Подсчет количества предложений на товар
- Определить самую дорогую по начислению транзакцию-покупку
- Определить среднее количество начисляемых бонусов при покупках
- Определить количество транзакций, проведенных успешно

### ___`DELETE`___

- Удалить товары, на которые нет предложений
- Удалить магазины, не сделавшие предложений

### ___`UPDATE`___

- Повысились налоги, цены на товары дороже 50$ увеличиваются на 5%
- Изменился региональный код страны (+2) на (+3)

---

## ___`select_count_tables.sql`___

`SELECT` для тестов на целостность заполнения таблиц.

---

## ___`selects.sql`___

Тестируемые запросы.

### ___`GROUP BY` + `HAVING`___

- Вывести все товары, продаваемые в Ашане

### ___`ORDER BY`___

- Вывести клиентов по возрасту
- Выбор соответствия транзакции и ее позиций

### ___`<func> OVER PARTITION BY`___

- Вывести среднюю цену товаров
- Соответствие транзакций с их позициями и суммарным числом позиций

### ___`<func> OVER ORDER BY`___

- Отранжировать клиентов по количеству бонусов

---

## ___`views.sql`___
Создание `VIEW` для базы данных (вынесены в отдельную схему `v`).

- `VIEW` клиентов с сокрытием персональных данных
- `VIEW` продаваемых товаров с их средней ценой
- `VIEW` истории кошелька
- `VIEW` успешных транзакций с информацией
- `VIEW` торговли магазинами
- `VIEW` надежности клиентов

---

## ___`select_views.sql`___
`SELECT` для тестов `VIEW`.

---

## ___`triggers.sql`___
Создание триггера для таблицы `cd.transactions` базы данных.

- `TRIGGER` отмены произведенной ранее транзакции.

---

## ___`select_triggers.sql`___
`SELECT` для тестов `TRIGGER`.

---